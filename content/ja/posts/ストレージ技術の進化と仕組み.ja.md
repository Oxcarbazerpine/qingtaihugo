---
date: 2024-06-01
draft: false
lang: ja
tags:
- Hardware
title: 存储技术
---

アナログ信号のドラム
* 円柱本体が回転し、探針がドラム本体上の磁気情報を読み取る
* 容量60KB、読み取り速度60KB/秒

レコードプレーヤー
* レコードはPVC製
* アナログ信号機。書き込み時に同心円上に凹みを彫り、カートリッジを左右に振動させ、カートリッジの一端に磁石が装着されていて、磁石は左右に振動し、左右に配置された2つのインダクターコイルを使って、左右のサウンドチャンネルで異なる電流を感知する。感知した電流は増幅後再生される
* ポップノイズ：レコードの表面に降り積もったダストがカートリッジを邪魔し、ダストカバーを装着するか、真空処理することで解消することができます
* アナログ信号、情報量無限大

カセットテープ
* 酸化鉄を塗布したプラスチックテープ、磁化可能
* 読み書き：コイルを巻いた鉄棒、ギャップがあるリング、このギャップを通してテープを磁化し、ギャップが小さいほど情報量が多い
* 雑音：さまざまな粒子が生み出すランダムな電信号
* アナログでもデジタルでも可、シーケンシャルな読み書き、企業の冷却バックアップの最適解、大容量で低コスト、40円/TB

フロッピーディスク
* カセットテープの材料とハードディスクドライブの原理を組み合わせています。マグネティックトラックとセクターがあります。
* 壊れやすい：マグネティックトラックが直接大気中に晒されていて、外装と接触し、常に摩擦し合います。
* 容量1MB、読書き100KB/秒

光ディスクCD、DVD、ブルーレイ
* 書き込み：ピアノの滝のような、ブライユ文字やモールス符号のように、プラスチック素材に様々な長さの凹点や凹槽を刻む
* 読み出し：赤外線を照射し、ラインスキャン。凹点がある場所で反射率が異なる。ディスクの鏡面はコントラストを向上させ、識別率を高めるため。
* ブルーレイ：波長の短いブルーレイを使用し、よりダイレクトに点を読み取ることができます。
* 単盤容量100G、100MB/秒で読み取り可能

ハードディスクドライブ（HDD）
* ブランド：Western Data、Seagate、Toshiba
* 構成：

    * メタルケース
    * 通気孔：内部に空気やヘリウムが充填され、熱膨張・収縮に対応するため、ダスト対策が施された通気孔がある
    * ヘッドが浮かび上がり、ディスクの回転で生じる空気浮力を利用する
    * 制御回路ボード：Ramキャッシュ、Romファームウェア、モータードライブ、CPUチップ
    * ディスク：アルミ合金/穀物基盤+磁性材料のコーティング+保護コーティング
* MR：Magnetic Resistance（磁気抵抗）

    * 原理：磁場は一部の素材の電気抵抗を変える
    * 効用：ヘッドの感度を向上させ、ディスク容量を大幅に増加させる。LMR（メディアの粒子が水平に配置される）からPMR（垂直マグネティックレコーディング）に推進する
* アドレッシング

    * ディスク
    * シリンダ（ヘッドが同期移動するため）
    * トラック：外側から内側へ、0からスタート
    * セクター（512B）：外層のセクター数が内層よりも多く、読書きがよりスムーズ
* フォーマット：

    * ファストフォーマット：パーティションテーブルをクリーニング
    * ノーマルフォーマット：セクターに0を登録
    * ローレベルフォーマット：ディスクをクリーニングし、トラックとセクターを再分配する
* ストレージ最適化

    * クラスター（win）、ブロック（unix）：隣接するブロックを最小単位として合体させる、win-NTFS=4KB
    * ファイルの大きさと利用空間：サイズはファイルの実際のサイズで、使用量はクラスターのサイズで、使用量>=ファイルのサイズ
* 速度：ターゲット設定時間+ローテーション遅延+読み書き時間
* キャッシュ：64MBレベルのメモリー、入出力とディスク読取り時間に差異がある、差異を縮小するためにキャッシュを設定。必ずしも大きいほど良いわけではない（利用しきれない、高価、リスク大）。

    * 書き込み時に一旦キャッシュに書き込み、次にヘッドがゆっくりとセクタに書き込む（フラッシュドライブやハードディスクなどを安全に取り外すためには、事前にデバイスをアンマウントする必要があります。そうしなければ、データはキャッシュ内に存在し、電源が遮断されるとデータは消滅します。）
* テスト

    * ソフトウェア：CrystalDiskMark 或者 AS SSD Benchmark
    * パラメータ：

        * seq：シーケンシャル読み書き
        * RND/4k：ランダム読み書き
        * Acc.Time：平均アクセス時間
* 容量が少なくなったときにスピードが低下：

    * ディスクの外側から内側へ書き込み、通過するセクターの数が減る（一部）
    * フラグメントが多すぎると、連続して読み書きできる領域が少なくなる

ソリッドステートドライブ
* ROM: リードオンリーメモリ
* EPROM：Erasable Programable ROM, 紫外線を使って電子を含む情報を消し、再プログラミングが可能
* EEPROM: Electric EPROM 電圧を使って情報を消すことが可能
* NANDフラッシュメモリ：NPN型半導体にゲート付き
* フローティングゲートトランジスタ：ゲートは、電子を蓄える多結晶シリコンや他の金属を絶縁二酸化シリコンで包んでいる
* 読み出し：

    * ゲートに電子が多く存在：下層のホールに電子がレピュージョンを示し、デプレッションレイヤーは広がり、0と読む
    * ゲートに電子が少ない：デプレッションレイヤーは通過可能、1と読む
* 書込み：

    * 0：ゲートに高電圧を加え、ドレインに低電圧を加え、ソースを接地につなぎ、高電圧を使って電子をドレインから二酸化シリコンに吸い込む（量子トンネル効果を利用）
    * 1：ゲートを接地につなぎ、ソースとドレインに高電圧をかけ、電子を量子トンネリング効果を利用して、絶縁層の二酸化シリコンを通過してp層に移動。
    * 電子が行き来すると二酸化シリコン層が損傷し、書き込み読み出し回数が限定される
* コントローラーの役割

    * リード/ライトキャッシュをスケジューリング
    * グレインの寿命負荷均一化
    * ECC によりビット反転エラーを検出し修正する、キャッシュを占有し、スピードダウン
    * ガベージコレクション：消耗を少なくするために、新しいブロックを先に使い、古いブロックがたまったら一回で消去する
* SLC MLC TLC QLC

    * ゲートが保持する電子数に応じて、複数の電圧値で通過し、そのビット数を判断
    * SLC 1bit MLC 2bit TLC 3bit QLC 4bit
    * 利点：コスト低下
    * 欠点：電子状態がますます細かくなり、間違いの可能性が高くなる；電圧レベルが高くなり、読み書き検査回数が増え、読み書きスピードが下がる。
* キャッシュ：

    * 独立したDRAMをキャッシュとして利用：最高でもコストが高い
    * QLC粒子の一部をSLCとしてキャッシュとして模倣：スペースを占有し、寿命を短くし、スピードダウン
    * メインメモリをキャッシュとして利用：コストダウン、技術自体が新しい


* メモリ

    * SRAM静的ランダムアクセスメモリ

        * 用途：CPUキャッシュ
        * データを保持するために定期的な充電は必要ない
        * 構造が複雑で高価
    * DRAM動的ランダムアクセスメモリ

        * 用途：メインメモリ
        * データはキャパシタに格納され、データを保持するためには周期的な充電が必要
        * 構造：1つのMOSトランジスタ+1つのコンデンサ
        * フローティングゲートトランジスタに似ていますが、フローティングゲートで電子を格納する部分がありません。
        * 量子トンネリングは利用しなくてもよく、読書き速度が速い
        * 摩耗なし、寿命ほぼ無限
        * ストレージユニットはアドレスデータラインに並列に接続されており、ユニットレベルでのランダムな読み書きが可能
        * Row + Column -> Bank -> Die
    * DIMMスロットのメモリストリップ
    * DDR--Double Data Rate

        * メモリーストリップとCPUのクロック周期が同期
        * 一つのクロック周期で、上昇と下降それぞれでデータを一度ずつ送信することをdoubleと言います。
        * DDR2は、一つのクロック周期でCPUキャッシュにデータを先行読み込みできることを指します。

            * DDR2は先行読み込み4bit、DDR3は先行読み込み8bit。