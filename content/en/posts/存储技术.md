---
title: "存储技术"
date: 2024-06-01
draft: false
tags: ["Hardware"]
---

模拟信号磁鼓
* 圆柱体本身旋转，探针读取鼓身上的磁性信息
* 容量60KB，读速度60KB/s

黑胶唱片Record Player
* 唱片是PVC
* 模拟信号机。写时在同心圆圈上刻凹痕，唱头左右随摆动，唱头另一端的磁铁随之左右摆动，磁铁左右各设置一个电感线圈，用来感应出左右声道不同的电流。感应电流经过amplify后播放
* 爆豆声：道上的灰尘阻碍了唱头，可通过加防尘罩或真空处理消除
* 模拟信号，信息量无限大

磁带
* 涂氧化铁的塑料带，可被磁化
* 读写：绕线圈的铁棒，是一个有缺口gap的环，通过这个gap来磁化磁带，gap越窄，信息量越大
* 沙沙声：各种粒子产生的随机电信号
* 可模拟可数字，顺序读写，企业冷备份首选，大容量低成本，40元/TB

软盘
* 磁带的材料加上机械硬盘的原理，有磁道和扇区
* 容易坏：磁道直接暴露在空气中，和外壳接触，经常摩擦
* 容量1MB，读写100KB/s

光盘CD，DVD，蓝光Blue-Ray
* 写入：像钢琴瀑布流，盲文，摩斯码一样，在塑料材料上烧出一个个长度不是的凹点或者凹条
* 读出：红外线照射，线性扫描，有凹点的地方反射率不同。光碟镜面为了提高对比度，提高识别率
* 蓝光：用波长更短的蓝光读取，点可以烧的更密集
* 单盘容量100G，100MB/s读取

机械硬盘HDD Hard Disk Drive
* 品牌：西部数据Western Data, 希捷Seagate, 东芝Toshiba
* 构成：

    * 金属外壳
    * 通气孔：内部填充空气或氦气，对应热胀冷缩，留一个有防尘措施的气孔
    * 磁头悬浮，利用磁盘旋转产生的空气浮力
    * 控制电路板：缓存Ram，固件Rom，电机驱动，主控芯片
    * 盘片：铝合金/波粒基底+磁性材料涂层+保护涂层
* MR：Magnetic Resistance磁阻

    * 原理：磁场会改变一些材料的电阻
    * 作用：提升了磁头灵敏度，大幅提高了磁盘容量，水平磁记录LMR（磁颗粒横向在盘片上）->垂直磁记录PMR（Perpendicular ）
* 寻址

    * 盘面
    * 柱面（因磁头同步移动）
    * 磁道：从外向内，从0开始
    * 扇区（512B）：外层的扇区数量比内层多，读写速度更快
* 格式化：

    * 快速格式化：清理分区表
    * 普通格式化：扇区填0
    * 低级格式化：清理盘面，重新划分磁道和扇区
* 存储优化

    * 簇（win），块unix:合并相邻的块作为最小单元，win-NTFS=4KB
    * 文件大小与占用空间：大小是文件实际大小，占用是簇的大小，所以占用空间>=文件大小
* 速度：寻道时间+旋转延迟+读写时间
* 缓存：64MB级别的内存条，IO与磁盘读取时间存在差异，为了减小差异，设置缓存。不是越大越好（用不上，贵，风险大）

    * 写入时可先写入缓存，磁头再慢慢写入扇区（把U盘硬盘之前先卸载设备的原因，否则数据只存在缓存中，断电消失）
* 测试

    * 软件：CrystalDiskMark 或者 AS SSD Benchmark
    * 参数：

        * seq:顺序读写
        * RND/4k:随机读写
        * Acc.Time:平均访问时间
* 容量变少时降速：

    * 盘片外侧写到内侧，划过扇区数目减小（次要）
    * 碎片太多，可连续读写区域变少

固态硬盘
* ROM: read only memory
* EPROM：Erasable Programable ROM 可被紫外线放跑电子擦除
* EEPROM: Electric EPROM 可以电压擦除
* NAND闪存：NPN+栅极
* 浮栅晶体管：栅极是绝缘二氧化硅包裹储存电子的多晶硅或其它金属
* 读取

    * 栅极电子多：对下方空穴中电子有排斥作用，耗尽层扩大，读0
    * 栅极电子少：耗尽层可以打通，读1
* 写入

    * 0：在栅极上加高电压，漏极加低电压，源极接地，用高压把电子从漏极吸入二氧化硅中（通过量子隧穿效应）
    * 1：栅极接地，源极和漏极高压，电子通过量子隧穿效应穿出绝缘二氧化硅层到P层。
    * 电子来回穿插损耗二氧化硅层，读写次数有限
* 主控的作用

    * 调度读写缓存
    * 颗粒寿命负载均衡x
    * ECC 通过检验和检测比特反转错误和进行恢复；占用缓存，掉速
    * 垃圾回收：为了减少磨损，先用空白块，等旧块累积后一次性擦除
* SLC MLC TLC QLC

    * 栅极储存不同数量的电子数量，对应不同的阈值电压来导通
    * SLC 1bit MLC 2bit TLC 3bit QLC 4bit
    * 优点：成本降低
    * 缺点：电子状态越多，越精细，电子跑掉导致错误的概率越大；电压阶梯越来越高，读写检测次数更高，读写速度越慢。
* 缓存：

    * 用独立DRAM做缓存：最好最贵
    * 用一部分QLC颗粒模拟成SLC来做缓存：占用空间，降低寿命，速度慢
    * 借用主存做缓存：成本降低，技术本身比较新


* 内存

    * SRAM静态随机存储器

        * 应用：cpu缓存
        * 不需要充电维持数据
        * 结构复杂，贵
    * DRAM动态随机存储器

        * 应用：主存
        * 数据存在电容中，需要周期性充电维持数据
        * 结构：一个MOS+一个电容。
        * 类似于浮栅晶体管，没有了浮栅来储存电子。
        * 不需要量子隧穿，读写速度快
        * 无磨损，寿命几乎无限
        * 储存单元并联在地址数据线上，可以单元级随机读写
        * Row+Cloumn -> Bank -> Die
    * 内存条的DIMM插槽
    * DDR--Double Data Rate

        * 内存条和CPU的时钟周期同步
        * 每个时钟周期的上行下行都发送一次数据，称为double
        * DDR2指一个周期可以通过预读取数据发送给CPU缓存

            * DDR2预读取4bit；DDR3--8bit

        * 


